<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.counter.dev/script.js" data-id="dad985f2-4cf5-45ef-983b-e17b014b5c75" data-utcoffset="1"></script>

  <!-- SEO metadata -->
  <meta name="description" content="BUTCHER & CORREIA is an interdisciplinary artist duo. Explore his portfolio, CV, and contact information." />
  <meta name="keywords" content="BUTCHER & CORREIA, Katherine Butcher, Carlos A. Correia, artist, portfolio, contemporary art, visual art" />
  <meta name="author" content="BUTCHER & CORREIA" />
  
  <!-- Open Graph (OG) metadata -->
  <meta property="og:title" content="BUTCHER & CORREIA - " />
  <meta property="og:description" content="Explore the portfolio, CV, and contact information for Carlos A. Correia." />
  <meta property="og:image" content="https://butchercorreia.com" />
  <meta property="og:url" content="https://butchercorreia.com" />
  <meta property="og:type" content="website" />
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />

  <title>BUTCHER & CORREIA</title>
  <style>
    html, body {
      margin: 0;
      font-family: Georgia, serif;
      height: 100%;
      background-color: transparent;
      min-height: 100vh;
    }
    body { min-height: 100vh; position: relative; }

    #draggable-bg {
      position: fixed;
      z-index: 0;
      top: 50%;
      left: 50%;
      width: 15vw;
      min-width: 180px;
      max-width: 540px;
      height: auto;
      pointer-events: auto;
      transform: translate(-50%, -50%);
      user-select: none;
      cursor: move;
      opacity: 1;
    }
    #draggable-bg img {
      width: 100%; height: auto; display: block;
      pointer-events: none; user-drag: none; user-select: none;
    }

    #modal-overlay {
      display: none;
      position: fixed;
      z-index: 1000;
      top: 0; left: 0; width: 100vw; height: 100vh;
      background: transparent; /* Invisible but still captures clicks */
      pointer-events: auto;
    }

    .site-title-box {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 100;
      cursor: move;
      background: transparent;
      padding: 0 0 0 0;
      min-width: 0;
      width: auto;
      max-width: 90vw;
      display: flex;
      align-items: center;
      justify-content: center;
      white-space: nowrap;
    }

    .site-title-underline {
      display: inline-block;
      border-bottom: 4px dashed #ff4000;
      padding-bottom: 2px;
    }

    .site-title {
      font-size: 1.5rem; font-weight: bold; background: transparent;
      color: #000; border: none; margin: 0; padding: 0;
      box-sizing: border-box; line-height: 1.2;
      white-space: nowrap; pointer-events: none; user-select: none;
      display: block; text-align: center;
    }

    .nav-column {
      position: fixed; top: 20px; left: 20px;
      display: flex; flex-direction: column; gap: 0.3rem;
      background: transparent; cursor: move; z-index: 2000;
    }
    
    .nav-column-2nd {
      position: fixed; top: 20px; left: 250px;
      display: flex; flex-direction: column; gap: 0.3rem;
      background: transparent; cursor: move; z-index: 2000;
    }
    
    .nav-column a { color: #000; text-decoration: none; font-size: 1.1rem; cursor: pointer; }
    .nav-column a:hover,
    .nav-column a.active {
      color: #ff4000;
      font-weight: normal;
    }

    .popup {
      position: fixed;
      top: 50%; left: 45%; transform: translate(-50%, -50%);
      background-color: #fff;
      border: 4px dashed #ff4000;
      padding: 2rem;
      width: 400px; min-width: 350px; max-width: 90%; 
      height: 500px; min-height: 440px; max-height: 90%;
      box-shadow: 10px 10px 0 #ff4000;
      z-index: 1100;
      display: none;
      overflow-y: auto;
      overflow-x: hidden;
      background: #fff;
      max-height: 80vh;
      height: auto;
      box-sizing: border-box;
    }
    .popup-secondary {
      position: fixed;
      top: 55%; left: 55%; transform: translate(-50%, -50%);
      background-color: #fff;
      border: 4px dashed #ff4000;
      padding: 2rem;
      width: auto;
      max-width: 90%;
      min-width: 300px;
      min-height: 350px;
      max-width: 70vw;
      max-height: 80vh;
      box-shadow: 10px 10px 0 #ff4000;
      z-index: 1200;
      display: none;
      background: #fff;
      overflow-y: auto;
      overflow-x: hidden;
      height: auto;
      box-sizing: border-box;
    }
    .popup .close-btn,
    .popup-secondary .close-btn,
    .popup .plus-btn,
    .popup-secondary .plus-btn,
    .popup .link-btn,
    .popup-secondary .link-btn {
      right: 10px;
      left: unset;
      position: absolute;
      z-index: 401;
      border: none;
      background: none;
      cursor: pointer;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .popup .resize-button,
    .popup-secondary .resize-button {
      top: 5px;
      right: 10px;
      width: 20px;
      height: 20px;
      background: transparent;
      cursor: pointer;
      z-index: 400;
      padding: 0;
      position: absolute;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .popup .close-btn,
    .popup-secondary .close-btn { top: 30px; }
    .popup .plus-btn,
    .popup-secondary .plus-btn { top: 55px; }
    .popup .link-btn,
    .popup-secondary .link-btn { top: 80px; }
    .popup .close-btn img,
    .popup .plus-btn img,
    .popup .link-btn img,
    .popup-secondary .close-btn img,
    .popup-secondary .plus-btn img,
    .popup-secondary .link-btn img {
      width: 20px;
      height: 20px;
      display: block;
    }
    .footnote-wrapper {
      position: fixed; bottom: 20px; left: 40px; z-index: 500;
      background: transparent; cursor: move; white-space: nowrap;
      pointer-events: auto; display: block !important;
    }
    .footnote {
      transform: rotate(-90deg); transform-origin: left bottom;
      font-size: 0.9rem; background: transparent;
      padding: 2px 8px; color: #333; display: block;
    }

    .popup,
    .popup-secondary {
      scrollbar-width: thin;              /* For Firefox */
      scrollbar-color: #ff4000 #fff;      /* For Firefox */
    }
    .popup::-webkit-scrollbar,
    .popup-secondary::-webkit-scrollbar {
      width: 8px;
      background: #fff;
    }
    .popup::-webkit-scrollbar-thumb,
    .popup-secondary::-webkit-scrollbar-thumb {
      background: #ff4000;
      border-radius: 4px;
    }

    @media (max-width: 768px) {
      body {
        padding: 0;
      }
      .site-title-box {
        position: fixed;
        width: 100vw;
        top: 0;
        left: 0;
        right: 0;
        display: flex;
        justify-content: flex-start;
        align-items: center;
        background: #fff;
        z-index: 3000;
        margin: 0;
        padding: 0em 0em 0em 0em;
        min-height: 48px;
      }
      .site-title-underline {
        border-bottom: 2px dashed #ff4000;
        width: auto;
        text-align: left;
      }
      .site-title {
        font-size: 1.1rem;
        margin-left: 0.5em;
        margin-top: 0.5em
      }
      .nav-column, .nav-column-2nd {
        display: none !important;
      }
      .burger-menu {
        display: block !important;
        position: fixed;
        top: 0.5em;
        right: 0.5em;
        z-index: 4000;
        background: none;
        border: none;
        font-size: 2em;
        color: #ff4000;
        cursor: pointer;
      }
      #mobileNavPopup {
        display: none;
        position: fixed;
        top: 0; left: 0; width: 100vw; height: 100vh;
        background: rgba(255,255,255,0.98);
        z-index: 5000;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
      #mobileNavPopup.active {
        display: flex !important;
      }
      #mobileNavPopup .mobile-nav-links {
        display: flex;
        flex-direction: column;
        gap: 2em;
        align-items: center;
      }
      #mobileNavPopup .close-mobile-nav {
        position: absolute;
        top: 1.2em;
        right: 1.2em;
        font-size: 2.2em;
        background: none;
        border: none;
        color: #ff4000;
        cursor: pointer;
      }
      .footnote-wrapper {
        position: fixed;
        left: 0.5em;
        bottom: 0.5em;
        z-index: 6000;
        background: transparent;
        pointer-events: auto;
        display: block !important;
        transform: none;
      }
      .footnote {
        transform: none;
        font-size: 0.7em;
        color: #333;
        background: transparent;
        padding: 1px 5px;
      }
      .popup, .popup-secondary {
        position: fixed;
        top: 5em;
        left: 50%;
        transform: translate(-50%, 0);
        width: 96vw;
        max-width: 96vw;
        min-width: unset;
        min-height: 800px;
        max-height: 70vh;
        height: auto;
        overflow-y: auto !important;
        overflow-x: hidden;
        box-sizing: border-box;
        padding: 1em;
        background:#fff
        border-width: 3px;
        touch-action: auto;
        display: none;
      }
      .popup[style*="display: block"], .popup-secondary[style*="display: block"] {
        display: block !important;
      }
    }
    @media (min-width: 769px) {
      .burger-menu, #mobileNavPopup {
        display: none !important;
      }
    }
  </style>
</head>
<body>
  <div id="draggable-bg" class="draggable">
    <img src="landingimage2.jpg" alt="Landing Image" draggable="false" />
  </div>

  <div id="modal-overlay"></div>

  <div class="site-title-box draggable">
    <span class="site-title-underline">
      <span class="site-title">BUTCHER & CORREIA</span>
    </span>
  </div>

  <div class="nav-column draggable">
    <a onclick="showPopup('sound-of-things', this)">The Sound of Things</a>
    <a onclick="showPopup('just-this', this)">Just This And Only That</a>
    <a onclick="showPopup('taste-of-sound', this)">Taste of Sound</a>
    <a onclick="showPopup('performance-vista', this)">Performance Vista</a>
    <a onclick="scrollToAnonymousSubmission()">anonymous submission</a>
  </div>

  <div class="nav-column nav-column-2nd draggable">
    <a onclick="showPopup('about', this)">About</a>
    <a onclick="showPopup('imagery', this)">Imagery</a>
  </div>

  <div id="popupContainer" class="popup draggable">
    <button class="close-btn" onclick="closePopup()"><img src="icons/Signs_close.jpg" alt="Close" style="width:20px;height:20px;"></button>
    <div id="popupContent"></div>
    <button class="plus-btn" onclick="handlePlusClick()"><img src="icons/Signs_plus.jpg" alt="Plus" style="width:20px;height:20px;"></button>
    <button class="link-btn" onclick="handleLinkClick()"><img src="icons/Signs_link.jpg" alt="Link" style="width:20px;height:20px;"></button>
  </div>

  <div id="secondPopup-sound-of-things" class="popup-secondary draggable">
    <button class="close-btn" onclick="closeSecondPopup('sound-of-things')"><img src="icons/Signs_close.jpg" alt="Close" style="width:20px;height:20px;"></button>
    <button class="plus-btn" onclick="handlePlusClick()"><img src="icons/Signs_plus.jpg" alt="Plus" style="width:20px;height:20px;"></button>
    <button class="link-btn" onclick="handleLinkClick()"><img src="icons/Signs_link.jpg" alt="Link" style="width:20px;height:20px;"></button>
    <div>
      <div style="padding:56.25% 0 0 0;position:relative;">
        <iframe src="https://player.vimeo.com/video/1093466451?badge=0&amp;autopause=0&amp;player_id=0&amp;app_id=58479" frameborder="0" allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share" style="position:absolute;top:0;left:0;width:100%;height:100%;" title="The Sound of Things"></iframe>
      </div>
    </div>
  </div>
  <div id="secondPopup-just-this" class="popup-secondary draggable">
    <button class="close-btn" onclick="closeSecondPopup('just-this')"><img src="icons/Signs_close.jpg" alt="Close" style="width:20px;height:20px;"></button>
    <button class="plus-btn" onclick="handlePlusClick()"><img src="icons/Signs_plus.jpg" alt="Plus" style="width:20px;height:20px;"></button>
    <button class="link-btn" onclick="handleLinkClick()"><img src="icons/Signs_link.jpg" alt="Link" style="width:20px;height:20px;"></button>
    <div><iframe src="https://justthisandonlythat.com" width="600" height="400"></iframe></div>
  </div>
  <div id="secondPopup-taste-of-sound" class="popup-secondary draggable">
    <button class="close-btn" onclick="closeSecondPopup('taste-of-sound')"><img src="icons/Signs_close.jpg" alt="Close" style="width:20px;height:20px;"></button>
    <button class="plus-btn" onclick="handlePlusClick()"><img src="icons/Signs_plus.jpg" alt="Plus" style="width:20px;height:20px;"></button>
    <button class="link-btn" onclick="handleLinkClick()"><img src="icons/Signs_link.jpg" alt="Link" style="width:20px;height:20px;"></button>
    <div><strong>Secondary popup for Taste of Sound</strong><br>Extra content here.</div>
  </div>
  <div id="secondPopup-performance-vista" class="popup-secondary draggable">
    <button class="close-btn" onclick="closeSecondPopup('performance-vista')"><img src="icons/Signs_close.jpg" alt="Close" style="width:20px;height:20px;"></button>
    <button class="plus-btn" onclick="handlePlusClick()"><img src="icons/Signs_plus.jpg" alt="Plus" style="width:20px;height:20px;"></button>
    <button class="link-btn" onclick="handleLinkClick()"><img src="icons/Signs_link.jpg" alt="Link" style="width:20px;height:20px;"></button>
    <img src="images/performancevista.jpg" alt="map" width="400">
    <img src="images/performancevista2.jpeg" alt="sketch" width="400">
    <a href="images/performance vista_leaflet.pdf" target="_blank">Performance Vista leaflet</a>
  </div>
  <div id="secondPopup-about" class="popup-secondary draggable">
    <button class="close-btn" onclick="closeSecondPopup('about')"><img src="icons/Signs_close.jpg" alt="Close" style="width:20px;height:20px;"></button>
    <button class="plus-btn" onclick="handlePlusClick()"><img src="icons/Signs_plus.jpg" alt="Plus" style="width:20px;height:20px;"></button>
    <button class="link-btn" onclick="handleLinkClick()"><img src="icons/Signs_link.jpg" alt="Link" style="width:20px;height:20px;"></button>
    <div><strong>cv</strong><br>
      upcoming<br>
      2026/2027  Norsk billedhoggerforening, Oslo (NO)<br>
      2026    Group show — Trondheimsbiennalen (NO)<br>
      2025    Costume design for SOLO by Rannei Grenne, BABEL, Trondheim and Kunstrom Jakob, Steinkjer (NO)</p>
       <p>2025    The Sound of Things, performance by Klaus E. Holm & Katherine Butcher, with Ieva Grigelionyte and Ensemble Aksiom - OnlyConnect at Rosendal Teater, Trondheim (NO)</p>
      2024    Just This And Only That, performance in public realm, Trøndelag (NO) - ongoing<br>
      2023    Taste of Sound, performance in collaboration with Klaus Ellerhusen Holm and Martin Moen Mosti - KunstFest 23 at Rotvoll kunstnerkollektiv, Trondheim (NO)<br>
      2023    net, nett, nether - Heimdal Kunstforening, Trondheim (NO)<br>
      2022    Unlikely the same as yesterday - Grenseløs, Trondheim (NO)<br></div>
  </div>

  <!-- Anonymous Submission Section -->
  <div id="anonymous-submission" style="margin-top: 100px; padding: 2em 1em; background: #fff; max-width: 600px; margin-left: auto; margin-right: auto; border: 2px dashed #ff4000;">
    <h2>Anonymous Submission</h2>
    <p>Submit your entry anonymously using the form below:</p>
    <form>
      <label for="submission-text">Your entry:</label><br>
      <textarea id="submission-text" name="submission-text" rows="4" style="width:100%"></textarea><br>
      <button type="submit" style="margin-top: 1em; background: #ff4000; color: #fff; border: none; padding: 0.5em 1.5em; cursor: pointer;">Submit</button>
    </form>
  </div>

  <div class="footnote-wrapper draggable" id="footnote">
    <div class="footnote">© 2025 BUTCHER & CORREIA<br>all entries were anonymously submited by artists</div>
  </div>

<!-- Add burger menu button and mobile nav popup -->
  <button class="burger-menu" id="burgerMenuBtn" aria-label="Open navigation" style="display:none;">&#9776;</button>
  <div id="mobileNavPopup">
    <button class="close-mobile-nav" aria-label="Close navigation">&times;</button>
    <div class="mobile-nav-links">
      <a onclick="showPopup('sound-of-things', this); closeMobileNav();">The Sound of Things</a>
      <a onclick="showPopup('just-this', this); closeMobileNav();">Just This And Only That</a>
      <a onclick="showPopup('taste-of-sound', this); closeMobileNav();">Taste of Sound</a>
      <a onclick="showPopup('performance-vista', this); closeMobileNav();">Performance Vista</a>
      <a onclick="showPopup('about', this); closeMobileNav();">About</a>
      <a onclick="showPopup('imagery', this); closeMobileNav();">Imagery</a>
      <a onclick="closeMobileNav(); scrollToAnonymousSubmission();">anonymous submission</a>
    </div>
  </div>

<script>
let currentPopupId = null;

const contentData = {
  "sound-of-things": `
    Performance, 60 min.<br>
    Only Connect 2025, Rosendal Teater - Trondheim, 2025<br>
    <p><strong>The Sound of Things</strong> is a collaborative, interdisciplinary performance conceived by Klaus Ellerhusen Holm (NO) and Katherine Butcher (AU), developed with Carlos A. Correia (PT), and featuring interdisciplinary artist in taste Ieva Grigelionyte (LT/UK). Aksiom Ensemble performs the sound composition.</p>
    Concept: Katherine Butcher and Klaus Ellerhusen Holm, developed with Carlos A. Correia<br>
    Sound Composition: Klaus E. Holm<br>
    Visuals & Dramaturgy: BUTCHER & CORREIA<br>
    Sound: Aksiom Ensemble<br>
    Food: Ieva Grigelionyte<br>
    Light design: Abigail Nava<br>
    Light tecnhician: Torbjørn Benjaminsen<br>
    Supported by: Trondheim kommune, Nettle T.O.C., Culligan
  `,
  "just-this": `
    2.01.2024–on going<br>
    <p><strong>Just This and Only That</strong> is a deliberately slow and participatory performative project that interweaves sustainability, art and community. We enter the project from a position of partial knowledge in order to create a new dialogue about sustainable living in our region. The project focuses on materiality, the textiles we wear on our bodies in both work and life, to examine our allocation of resources to meet our need for freedom of shelter, movement and expression. Our performative actions are committed to the awareness of the present moment. Through 'Just This And Only That' we step forward to act in new artistic constellations to encourage shared responsibility, unexpected discoveries and evolving identities.</p>
    <a href="https://justthisandonlythat.com">justthisandonlythat.com</a><br>
    Supported by: Kulturdirektoratet
  `,
  "taste-of-sound": `
    Performance, 60 min.<br>
    KunstFest, Rotvoll Kunstnerkollektiv - Trondheim, 2023<br><br>
    <p>Layers of plasticity: elements such as background music, tableware, packaging design, lighting hues, and even menu item names have been recognized as significant factors that shape our perception of taste.</p>
    <p><strong>Taste of Sound</strong> explores the possibilities of multisensory input while investigating how the activation of multiple sensory impressions simultaneously can provide new and curious personal imagery. The performance interweaves sound, flavor, and visual impressions. Through manipulation of these elements, our gestures aim to challenge your sense of flavor, unveil novel and unexpected soundscapes, and challenge conventional taste perceptions by altering the visual presentation of food. This event serves as a scaled-down preview of our comprehensive showcase scheduled for 2024.</p>
    Concept: Katherine Butcher and Klaus Ellerhusen Holm, developed with Carlos A. Correia<br>
    Visuals & Choreography: BUTCHER & CORREIA<br>
    Sound: Klaus Ellerhusen Holm and Andreas Røysum<br>
    Food: Martin Moen Mosti and Even Østby<br>
    Event supported by: Rotvoll Kunstnerkollektiv - KunstFest, Norsk jazzforum and Norsk Komponistforening
  `,
  "performance-vista": `
    Performance, anemometer, support jacks, lifting straps, construction helmets, reflective vests, and HOEFLON C10 crane. Variable dimensions.<br>
    Group exhibition <strong>Unlikely the same as yesterday</strong>, GRENSELØS, Norway
    <p><strong>Performance Vista</strong> is a pleasing sight between a long narrow row of trees; a succession of anticipated events, a vision, a view of a series of actions in the mind, a performance vista played out, unfolding retrospectively and prospectively.</p>
    <a href="https://performancevista.com">performancevista.com</a><br>
    <a href="https://instagram.com/performancevista">@performancevista</a>
  `,
  "about": `
    we are Katherine BUTCHER & Carlos A. CORREIA<br>
    studio [at] butchercorreia.com<br><br>
    <p>BUTCHER & CORREIA ground their artistic process in an awareness of local and global political and social landscapes. Their work spans performance, immersive environments, and tangible objects, often critiquing contemporary issues like labor, hierarchy, regenerative practices, and social norms. Embracing intersectionality, they link climate justice with social justice, integrating environmental concerns into social and political narratives. Their art reflects a commitment to positive environmental and social change, fostering connections between art, nature, and shared human experience while underscoring the interdependence of climate and social equity.<br><br>
    <img src="BCportrait.jpg" alt="Polaroid" width="200">
  `
};

function showPopup(id, element) {
  // Close all popups and remove active state
  document.getElementById('popupContainer').style.display = 'none';
  document.querySelectorAll('.popup-secondary').forEach(sp => sp.style.display = 'none');
  document.querySelectorAll('.nav-column a').forEach(link => link.classList.remove('active'));
  currentPopupId = null;
  setOverlayVisibility();

  // Now, immediately open the new popup for the nav link
  const popup = document.getElementById('popupContainer');
  const content = document.getElementById('popupContent');
  currentPopupId = id;
  content.innerHTML = contentData[id] || 'No content found.';
  popup.style.display = 'block';
  if (element) element.classList.add('active');
  setOverlayVisibility();
  // Add resize button to main popup if not present
  if (!popup.querySelector('.resize-button')) {
    const button = document.createElement('div');
    button.className = 'resize-button';
    button.setAttribute('aria-label', 'resize');
    button.setAttribute('tabindex', '-1');
    button.innerHTML = `<img src="icons/Signs_expand1.jpg" alt="Resize" style="width:20px;height:20px;">`;
    let isResizing = false;
    let startX, startY, startWidth, startHeight;
    button.addEventListener('mousedown', (e) => {
      e.preventDefault();
      e.stopPropagation();
      isResizing = true;
      startX = e.clientX;
      startY = e.clientY;
      startWidth = parseInt(document.defaultView.getComputedStyle(popup).width, 10);
      startHeight = parseInt(document.defaultView.getComputedStyle(popup).height, 10);
      document.documentElement.addEventListener('mousemove', doResize);
      document.documentElement.addEventListener('mouseup', stopResize);
    });
    function doResize(e) {
      if (!isResizing) return;
      popup.style.width = (startWidth + e.clientX - startX) + 'px';
      popup.style.height = (startHeight + e.clientY - startY) + 'px';
    }
    function stopResize() {
      isResizing = false;
      document.documentElement.removeEventListener('mousemove', doResize);
      document.documentElement.removeEventListener('mouseup', stopResize);
    }
    popup.appendChild(button);
  }
}

function handlePlusClick() {
  if (!currentPopupId) return;
  openSecondPopup(currentPopupId);
}

function closeSecondPopup(id) {
  if (!id) return;
  const secondPopup = document.getElementById('secondPopup-' + id);
  if (secondPopup) {
    secondPopup.style.display = 'none';
    setOverlayVisibility();
  }
}

function closePopup() {
  document.getElementById('popupContainer').style.display = 'none';
  document.querySelectorAll('.popup-secondary').forEach(sp => sp.style.display = 'none');
  document.querySelectorAll('.nav-column a').forEach(link => link.classList.remove('active'));
  currentPopupId = null;
  setOverlayVisibility();
}

function openSecondPopup(id) {
  document.querySelectorAll('.popup-secondary').forEach(sp => sp.style.display = 'none');
  const popup = document.getElementById(`secondPopup-${id}`);
  if (!popup) return;
  popup.style.display = 'block';
  setOverlayVisibility();
  if (!popup.querySelector('.resize-button')) {
    const button = document.createElement('div');
    button.className = 'resize-button';
    button.setAttribute('aria-label', 'resize');
    button.setAttribute('tabindex', '-1');
    button.innerHTML = `
      <img src="icons/Signs_expand1.jpg" alt="Resize" style="width:20px;height:20px;">
    `;
    let isResizing = false;
    let startX, startY, startWidth, startHeight;
    
     button.addEventListener('mousedown', (e) => {
      e.preventDefault();
      e.stopPropagation();
      isResizing = true;
      startX = e.clientX;
      startY = e.clientY;
      startWidth = parseInt(document.defaultView.getComputedStyle(popup).width, 10);
      startHeight = parseInt(document.defaultView.getComputedStyle(popup).height, 10);
      document.documentElement.addEventListener('mousemove', doResize);
      document.documentElement.addEventListener('mouseup', stopResize);
    });
    
    button.addEventListener('mousedown', (e) => {
      isResizing = true;
      startX = e.clientX;
      startY = e.clientY;
      startWidth = parseInt(document.defaultView.getComputedStyle(popup).width, 10);
      startHeight = parseInt(document.defaultView.getComputedStyle(popup).height, 10);
      document.documentElement.addEventListener('mousemove', doResize);
      document.documentElement.addEventListener('mouseup', stopResize);
    });
    function doResize(e) {
      if (!isResizing) return;
      popup.style.width = (startWidth + e.clientX - startX) + 'px';
      popup.style.height = (startHeight + e.clientY - startY) + 'px';
    }
    function stopResize() {
      isResizing = false;
      document.documentElement.removeEventListener('mousemove', doResize);
      document.documentElement.removeEventListener('mouseup', stopResize);
    }
    popup.appendChild(button);
  }
}

function setOverlayVisibility() {
  const mainPopup = document.getElementById("popupContainer");
  const allSecondPopups = Array.from(document.querySelectorAll(".popup-secondary"));
  const anyMainVisible = mainPopup && mainPopup.style.display !== "none";
  const anySecondaryVisible = allSecondPopups.some(el => el.style.display !== "none");
  const overlay = document.getElementById("modal-overlay");
  overlay.style.display = (anyMainVisible || anySecondaryVisible) ? "block" : "none";
}

document.getElementById('modal-overlay').addEventListener('mousedown', function(e) {
  if (e.target !== this) return;
  const mainPopup = document.getElementById("popupContainer");
  const allSecondPopups = Array.from(document.querySelectorAll(".popup-secondary"));
  const visibleSecondPopup = allSecondPopups.find(el => el.style.display !== "none");
  if (visibleSecondPopup) {
    visibleSecondPopup.style.display = "none";
    setOverlayVisibility();
  } else if (mainPopup && mainPopup.style.display !== "none") {
    closePopup();
    setOverlayVisibility();
  }
});

document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape' || e.key === 'Esc') {
    const mainPopup = document.getElementById("popupContainer");
    const allSecondPopups = Array.from(document.querySelectorAll(".popup-secondary"));
    const visibleSecondPopup = allSecondPopups.find(el => el.style.display !== "none");
    if (visibleSecondPopup) {
      visibleSecondPopup.style.display = "none";
      setOverlayVisibility();
    } else if (mainPopup && mainPopup.style.display !== "none") {
      closePopup();
      setOverlayVisibility();
    }
  }
});

function makeDraggable(el) {
  let offsetX = 0, offsetY = 0, startX = 0, startY = 0;
  let isDragging = false;
  let origZ = '';
  el.onmousedown = dragMouseDown;
  function dragMouseDown(e) {
    // Ignore if the target is the resize button or inside it
    if (e.target.closest('.resize-button')) return;
    if (e.button !== 0) return;
    e.preventDefault();
    isDragging = true;
    startX = e.clientX;
    startY = e.clientY;
    origZ = el.style.zIndex;
    el.style.zIndex = 2000;
    document.onmouseup = closeDragElement;
    document.onmousemove = elementDrag;
  }
  function elementDrag(e) {
    if (!isDragging) return;
    e.preventDefault();
    offsetX = startX - e.clientX;
    offsetY = startY - e.clientY;
    startX = e.clientX;
    startY = e.clientY;
    el.style.top = (el.offsetTop - offsetY) + "px";
    el.style.left = (el.offsetLeft - offsetX) + "px";
  }
  function closeDragElement() {
    isDragging = false;
    el.style.zIndex = origZ;
    document.onmouseup = null;
    document.onmousemove = null;
  }
}
window.onload = function () {
  document.querySelectorAll('.draggable').forEach(el => {
    makeDraggable(el);
  });
};
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll('.draggable').forEach(makeDraggable);
});

// Mobile burger menu logic
function openMobileNav() {
  document.getElementById('mobileNavPopup').classList.add('active');
}
function closeMobileNav() {
  document.getElementById('mobileNavPopup').classList.remove('active');
}
const burgerBtn = document.getElementById('burgerMenuBtn');
const mobileNavPopup = document.getElementById('mobileNavPopup');
if (burgerBtn && mobileNavPopup) {
  burgerBtn.addEventListener('click', openMobileNav);
  mobileNavPopup.querySelector('.close-mobile-nav').addEventListener('click', closeMobileNav);
}
// Show/hide burger menu on resize
function handleBurgerMenuDisplay() {
  if (window.innerWidth <= 768) {
    burgerBtn.style.display = 'block';
  } else {
    burgerBtn.style.display = 'none';
    closeMobileNav();
  }
}
window.addEventListener('resize', handleBurgerMenuDisplay);
document.addEventListener('DOMContentLoaded', handleBurgerMenuDisplay);
// Disable draggable on mobile
function isMobile() {
  return window.innerWidth <= 768;
}
function disableDraggableOnMobile() {
  if (isMobile()) {
    document.querySelectorAll('.draggable').forEach(el => {
      el.onmousedown = null;
      el.ontouchstart = null;
      el.style.pointerEvents = 'none';
      el.style.userSelect = 'none';
      el.style.cursor = 'default';
    });
  } else {
    document.querySelectorAll('.draggable').forEach(makeDraggable);
  }
}
window.addEventListener('resize', disableDraggableOnMobile);
document.addEventListener('DOMContentLoaded', disableDraggableOnMobile);

function handleLinkClick() {
  alert('Link button clicked! (placeholder)');
}

function scrollToAnonymousSubmission() {
  const el = document.getElementById('anonymous-submission');
  if (el) {
    el.scrollIntoView({ behavior: 'smooth' });
  }
}
</script>
</body>
</html>
